<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="小村夫">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="小村夫">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Teibby Zhang">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>小村夫</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">小村夫</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">小村夫的个人博客</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/04/27/performance/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Teibby Zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小村夫">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/04/27/performance/" class="post-title-link" itemprop="url">性能优化实用经验分享——文档编辑</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2024-04-27 11:52:34 / Modified: 22:29:15" itemprop="dateCreated datePublished" datetime="2024-04-27T11:52:34+08:00">2024-04-27</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="背景介绍"><a href="#背景介绍" class="headerlink" title="背景介绍"></a>背景介绍</h2><p>作为一个文档类产品，编辑是用户最核心、最主要的使用场景（没有之一）。随着业务的发展，在需求的迭代过程中，经常有一些不经意的改动导致了文档使用的卡顿，导致编辑体验下降。因此，团队内在上季度开始了编辑劣化的排查及防劣化方向的推进。这里主要介绍过程中发现的一些影响编辑体验的点，和一些可行的优化方向。</p>
<h2 id="个人关于性能优化的理解"><a href="#个人关于性能优化的理解" class="headerlink" title="个人关于性能优化的理解"></a>个人关于性能优化的理解</h2><p>在我看来，性能优化就是<strong>做小部分的加法来换得大部分的减法</strong>。加法可能有很多方面，比如说逻辑的可读性可能变差，总代码量可能变多等等，减法则是指性能优化的核心目标。</p>
<p>性能优化的通用核心思路是<strong>减少不必要的逻辑调用</strong>。但是，对于不同的语言特性、架构实现、框架能力、优化目标来说，性能优化的手段、侧重点会<strong>有所不同</strong>。</p>
<h2 id="编辑性能优化分享"><a href="#编辑性能优化分享" class="headerlink" title="编辑性能优化分享"></a>编辑性能优化分享</h2><p>在文档中，编辑指标关注的是用户按下按键到内容第一次上屏之间的耗时。在录制的 performance 中，一般是指从<code>keydown</code>事件开始，一直到此后的浏览器<code>paint</code>阶段完成结束。编辑性能，主要就是关注这个周期内的耗时情况，结合业务逻辑优化这里的耗时。</p>
<p>经过分析发现，编辑性能主要受两个因素影响：1. 周期内代码逻辑的耗时；2. 周期内触发浏览器重渲染的耗时。因此，编辑性能优化的主要目标之一就是降低周期内两者的一些不合理、可优化的耗时。下面本人主要从多个角度针对编辑性能优化的经验进行整理和分享。</p>
<h3 id="1-避免或降低触发浏览器重渲染的耗时"><a href="#1-避免或降低触发浏览器重渲染的耗时" class="headerlink" title="1. 避免或降低触发浏览器重渲染的耗时"></a>1. 避免或降低触发浏览器重渲染的耗时</h3><p>浏览器的重渲染主要是由于<strong>回流</strong>导致的。这里引用一下别人对重绘、回流概念的部分<a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903569087266823">介绍</a>：</p>
<blockquote>
<p>现代浏览器会对频繁的回流或重绘操作进行优化：</p>
<p>浏览器会维护一个队列，把所有引起回流和重绘的操作放入队列中，如果队列中的任务数量或者时间间隔达到一个阈值的，浏览器就会将队列清空，进行一次批处理，这样可以把多次回流和重绘变成一次。</p>
<p>当你访问以下属性或方法时，浏览器会立刻清空队列：</p>
<ul>
<li><code>clientWidth</code>、<code>clientHeight</code>、<code>clientTop</code>、<code>clientLeft</code></li>
<li><code>offsetWidth</code>、<code>offsetHeight</code>、<code>offsetTop</code>、<code>offsetLeft</code></li>
<li><code>scrollWidth</code>、<code>scrollHeight</code>、<code>scrollTop</code>、<code>scrollLeft</code></li>
<li><code>width</code>、<code>height</code></li>
<li><code>getComputedStyle()</code></li>
<li><code>getBoundingClientRect()</code></li>
</ul>
<p>因为队列中可能会有影响到这些属性或方法返回值的操作，即使你希望获取的信息与队列中操作引发的改变无关，浏览器也会强行清空队列，确保你拿到的值是最精确的。</p>
</blockquote>
<p>另外，当某一元素产生回流时，可能导致其所有子元素以及 DOM 中紧跟其后的节点、祖先节点元素的随后回流。</p>
<p>上面提到的文档中也提到了一些避免回流的策略。我再补充一些优化回流的方式：</p>
<p>根据回流的影响范围，我们可以从下面几个手段优化降低回流的耗时：</p>
<ul>
<li>精简页面的 DOM 结构<ul>
<li>如通过按需渲染、虚拟滚动等方式，将不在可见区域的内容使用空 div 占位，这样即使触发了回流，也不会耗费过多时间</li>
<li>降低 DOM 复杂度（当然，对于一些复杂业务来说，这只是一个美好的幻想，毕竟谁会希望把自己维护的东西做复杂呢～？）</li>
</ul>
</li>
<li>把频繁会因挂载、卸载引起回流的 DOM 放在相对靠后的位置<ul>
<li>比如经常要挂载的 Popover 组件等等</li>
</ul>
</li>
</ul>
<h3 id="2-尽可能减少逻辑耗时"><a href="#2-尽可能减少逻辑耗时" class="headerlink" title="2. 尽可能减少逻辑耗时"></a>2. 尽可能减少逻辑耗时</h3><p>这里的优化建议大部分具有一定普适性和实用性，大家在日常编码过程中就能注意并优化～</p>
<h4 id="2-1-利用好-和-的短路效果"><a href="#2-1-利用好-和-的短路效果" class="headerlink" title="2.1 利用好&amp;&amp;和||的短路效果"></a>2.1 利用好<code>&amp;&amp;</code>和<code>||</code>的短路效果</h4><p>在 Javascript 中，<code>&amp;&amp;</code>和<code>||</code>条件判断符具有“短路”的特征。即当同时存在多个条件时，若靠前的条件已经决定了表达式的结果时，编译器就不再关心和计算后面的条件了。</p>
<p>日常过程中，业务迭代时，开发同学往往会根据需求简单粗暴给业务添加逻辑，或为了可读性了做了一些提前的逻辑计算，让一些看似简单的条件判断，往往也藏着不小的性能开销。</p>
<p>下面做一些举例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">// 这里举的例子默认除变量外其他条件一致！</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// case 1: 把容易达成的条件放在了后面</span></span><br><span class="line"><span class="comment">// 条件 A 有 1/1000 频率是 false</span></span><br><span class="line"><span class="comment">// 条件 B 大概率是 false</span></span><br><span class="line"><span class="comment">// 条件 B 更容易触发短路操作，却放在了靠后的位置，导致条件 A 重复被计算</span></span><br><span class="line"><span class="keyword">const</span> result = <span class="title function_">conditionA</span>() &amp;&amp; <span class="title function_">conditionB</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// case 2: 把耗时的条件执行放在了前面</span></span><br><span class="line"><span class="comment">// 条件 A 平均调用耗时 1ms</span></span><br><span class="line"><span class="comment">// 条件 B 平均调用耗时 0.0001ms</span></span><br><span class="line"><span class="comment">// 条件 A 存在较大的调用损耗，却放在前面，导致逻辑一直被优先调用，存在性能损耗</span></span><br><span class="line"><span class="keyword">const</span> result = <span class="title function_">conditionA</span>() || <span class="title function_">conditionB</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// case 3: 多个判断条件依赖同一变量，在条件语句前提前声明了变量</span></span><br><span class="line"><span class="comment">// 条件 A 不依赖任何变量</span></span><br><span class="line"><span class="comment">// 条件 B 依赖变量 a</span></span><br><span class="line"><span class="comment">// 条件 C 依赖变量 a</span></span><br><span class="line"><span class="comment">// 变量 a 不是任何条件都需要使用，这样子会导致变量 a 变成稳定的逻辑耗时</span></span><br><span class="line"><span class="keyword">const</span> a = <span class="title function_">getPeerVariable</span>();</span><br><span class="line"><span class="keyword">const</span> result = <span class="title function_">conditionA</span>() || <span class="title function_">conditionB</span>(a) || <span class="title function_">conditionC</span>(a);</span><br><span class="line"><span class="comment">// 这种一般可考虑两种方式处理：</span></span><br><span class="line"><span class="comment">// 1. 如果是提前返回的逻辑，可以先单独判断条件 A，不满足 A 的情况下，再判断条件 B 和 C</span></span><br><span class="line"><span class="comment">// 2. 如果不是提前返回的逻辑，可以考虑使用 IIFE 等方式，限定变量 a 的调用条件和范围</span></span><br><span class="line"><span class="comment">// 以下是建议的两种调用方式：</span></span><br><span class="line"><span class="comment">// 方式 1:</span></span><br><span class="line"><span class="keyword">if</span> (<span class="title function_">conditionA</span>()) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> a = <span class="title function_">getPeerVariable</span>();</span><br><span class="line"><span class="keyword">if</span> (<span class="title function_">conditionB</span>(a) || <span class="title function_">conditionC</span>(a)) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 方式 2:</span></span><br><span class="line"><span class="keyword">const</span> result = <span class="title function_">conditionA</span>() || (<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> a = <span class="title function_">getPeerVariable</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">condtionB</span>(a) || <span class="title function_">conditionC</span>(a);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<blockquote>
<p>当然，实际情况可能会复杂一些，可能会是几个 case 的组合。可以根据实际情况对条件的执行顺序进行适当优化及调整。</p>
<p>可能在一些情况下，调整完条件顺序的后果是代码可读性下降。个人认为可以考虑通过添加注释等方式，提升维护同学对代码的理解。</p>
</blockquote>
<h4 id="2-2-延迟不重要的逻辑调用"><a href="#2-2-延迟不重要的逻辑调用" class="headerlink" title="2.2 延迟不重要的逻辑调用"></a>2.2 延迟不重要的逻辑调用</h4><p>对于编辑性能处理来说，指标主要采集的是键盘按下后到浏览器首次 paint 之间执行的耗时。为了提升编辑的性能，将一些不重要的逻辑推迟到 paint 之后执行会是一个不错的方式。<code>requestAnimationFrame</code>方法是一个方便的延迟逻辑的选择。</p>
<blockquote>
<p>这里需要注意的是——在逻辑中调用的第一个 RAF 还是会在第一次浏览器 paint 前执行，因此，想要保证逻辑在浏览器 paint 之后调用，实际上需要两次 RAF 的调用。</p>
</blockquote>
<h4 id="2-3-避免同一周期内相同逻辑的重复调用"><a href="#2-3-避免同一周期内相同逻辑的重复调用" class="headerlink" title="2.3 避免同一周期内相同逻辑的重复调用"></a>2.3 避免同一周期内相同逻辑的重复调用</h4><p>随着文档架构复杂度的提升或需求的优化，很容易出现在同一周期内的不同阶段重复调用同一逻辑的情况。如果调用的数量多且逻辑比较耗时，那就会大幅影响相关的性能。这里建议有以下两种优化方式：</p>
<ol>
<li>如果调用的逻辑在周期内结果不会产生变更，那么直接在第一次调用时进行缓存，找合适的时机清空缓存即可</li>
<li>如果调用的逻辑可能在周期内发生变更，但对逻辑的实时性要求不高，那么就可以通过延迟调用的方式，实现一个 RAF 版的节流逻辑，降低调用次数</li>
</ol>
<p>例如，对于一些逻辑复杂且数量很多的 React ClassComponent 组件，有条件地调用<code>setState</code>会帮助提升不少性能～</p>
<h4 id="2-4-提前终止不需要处理的逻辑"><a href="#2-4-提前终止不需要处理的逻辑" class="headerlink" title="2.4 提前终止不需要处理的逻辑"></a>2.4 提前终止不需要处理的逻辑</h4><p>随着业务的发展，开发同学们经常需要监听某一变更进行有条件的逻辑处理。如果要处理的逻辑非常耗时或者复杂，那么，快速终止大部分不满足条件的情况继续处理逻辑会非常有效地提升性能。比如很多模块会对<code>keydown</code>事件做监听，有的只是为了针对特定的按键在特定场景下做一些处理。如果没有提前终止相关逻辑，将会产生不少的性能浪费。</p>
<p>以下是一些实用的场景举例：</p>
<ol>
<li>如果你想监听网页尺寸的宽或高的变化进行一些逻辑更新，请增加相关的 diff，避免增加不必要的耗时</li>
<li>如果你想对指定的某个或某些快捷键做拦截或特别处理，可以用一些简单的规则过滤掉大部分不符合的按键操作</li>
</ol>
<blockquote>
<p>其实 2.1 优化建议也是为了提前终止不需要处理的逻辑，把这一点单拎出来主要是这个细节经常有同学没注意～</p>
</blockquote>
<h4 id="2-5-实现逻辑的动态注入，动态提升逻辑复杂度"><a href="#2-5-实现逻辑的动态注入，动态提升逻辑复杂度" class="headerlink" title="2.5 实现逻辑的动态注入，动态提升逻辑复杂度"></a>2.5 实现逻辑的动态注入，动态提升逻辑复杂度</h4><p>这是一个偏架构层的编辑性能优化建议——通过对逻辑的动态注入，可以避免一些不必要的逻辑计算。怎么理解呢？我举个例子来说：如果文档内没有表格，我就不应该判断是否是在表格内进行编辑操作。</p>
<p>实现了逻辑的动态注入后，就不会在没有某模块时调用和该模块强相关的逻辑，对于大部分简单文档来说，能降低不少无用逻辑带来的耗时浪费。</p>
<h4 id="2-6-避免在-React-的useState参数中直接调用并获取函数返回值作为初始值"><a href="#2-6-避免在-React-的useState参数中直接调用并获取函数返回值作为初始值" class="headerlink" title="2.6 避免在 React 的useState参数中直接调用并获取函数返回值作为初始值"></a>2.6 避免在 React 的<code>useState</code>参数中直接调用并获取函数返回值作为初始值</h4><p>对于 React 的函数式组件来说，每一次重渲染，实际就是重新调用了一遍函数。众所周知，<code>useState</code>这个 hook 只在组件初始化时会用到 hook 中的初始值，重渲染时，这个值会被直接忽略并丢弃。但是，如果<code>useState</code>的入参是一个函数实时计算的返回值，虽然它会被丢弃，但是<strong>函数计算的耗时依然存在</strong>。当然，解决办法也很简单——就是将写法改成回调函数，在回调函数里面返回函数计算结果。</p>
<p>React 在官网 API 介绍中也<a target="_blank" rel="noopener" href="https://react.dev/reference/react/useState#avoiding-recreating-the-initial-state">提到</a>了这一点，也建议大家不要直接在<code>useState</code>中直接调用函数获取返回值作为初始值。</p>
<p>不建议写法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [value, setValue] = <span class="title function_">useState</span>(<span class="title function_">expensiveCallFunction</span>(args));</span><br></pre></td></tr></table></figure>

<p>建议写法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [value, setValue] = <span class="title function_">useState</span>(<span class="function">() =&gt;</span> <span class="title function_">expensiveCallFunction</span>(args));</span><br></pre></td></tr></table></figure>

<blockquote>
<p>当然，直接在函数式组件的 hooks 外进行耗时的计算操作也会直接拖慢 React 的更新效率。因此，尽量将耗时的计算操作放在 hooks 中吧～</p>
</blockquote>
<h4 id="2-7-一些其他的优化建议汇总"><a href="#2-7-一些其他的优化建议汇总" class="headerlink" title="2.7 一些其他的优化建议汇总"></a>2.7 一些其他的优化建议汇总</h4><p>有一些不好归纳的性能优化手段，这里统一做一些列举：</p>
<ol>
<li>如果你原本想用<code>document.querySelection(aSelector)?.contains(bNode)</code>，可以换成<code>bNode.closest(aSelector)</code></li>
<li>对于一些常用且不易变更的节点，建议以配置常量的方式缓存起来，不要每次都单独获取</li>
<li>如果可以通过新增一些标志来识别某些状态的，没必要借助 DOM 的 API（如<code>document.querySelector()</code>)</li>
</ol>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>性能优化其实就在每个人身边～它也不是一件多复杂的事情。希望每位同学都能在日常编码过程中注意到这些优化点，做一名极致的 coder~</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Teibby Zhang</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">1</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Teibby Zhang</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
